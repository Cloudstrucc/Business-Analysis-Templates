<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{title}} | Cloudstrucc BA Forms</title>
  
  <!-- Bootstrap 5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons (Lucide alternative) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <!-- CloudStrucc Design System -->
  <link href="/css/cloudstrucc.css" rel="stylesheet">
</head>
<body>
  <!-- Site Header - 64px height, dark (Slate 900) -->
  <header class="site-header">
    <div class="container">
      <a href="/" class="brand">
        <i class="bi bi-diagram-3"></i> Cloudstrucc
      </a>
      <nav class="nav-links">
        <a href="https://cloudstrucc.com">About</a>
        <a href="https://diagrams.cloudstrucc.com">Diagrams</a>
        {{#if isAdmin}}
        <a href="/admin/logout">Sign Out</a>
        {{else}}
        <a href="/admin/login" class="btn-signin">Sign In</a>
        {{/if}}
      </nav>
    </div>
  </header>

  {{#if isAdmin}}
  <!-- Admin Layout - Sidebar 256px, Main content Slate 50 background -->
  <div class="admin-layout">
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <div class="nav-group-label">Main</div>
        <a href="/admin/dashboard" class="nav-item {{#if isDashboard}}active{{/if}}">
          <i class="bi bi-grid-1x2"></i>Dashboard
        </a>
        
        <div class="nav-group-label">Management</div>
        <a href="/admin/invites" class="nav-item {{#if isInvites}}active{{/if}}">
          <i class="bi bi-envelope"></i>Invites
        </a>
        <a href="/admin/submissions" class="nav-item {{#if isSubmissions}}active{{/if}}">
          <i class="bi bi-inbox"></i>Submissions
        </a>
        <a href="/admin/forms" class="nav-item {{#if isForms}}active{{/if}}">
          <i class="bi bi-file-text"></i>Forms
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-badge">
          <div class="user-avatar">{{#if admin}}{{substring admin.email 0 1}}{{else}}A{{/if}}</div>
          <div>
            <div class="user-name">{{#if admin}}{{admin.email}}{{else}}Admin{{/if}}</div>
            <div class="user-role">Administrator</div>
          </div>
        </div>
      </div>
    </aside>
    
    <div class="main-wrap">
      <!-- Top Bar - 64px height, white, shadow-sm -->
      <header class="page-header">
        <div class="d-flex align-items-center gap-3">
          <button class="mobile-toggle d-lg-none" onclick="document.getElementById('sidebar').classList.toggle('show')" aria-label="Toggle menu">
            <i class="bi bi-list"></i>
          </button>
          <h1>{{title}}</h1>
        </div>
      </header>
      
      <main class="page-content">
        {{#if messages.success}}
        <div class="alert alert-success mb-4">
          <i class="bi bi-check-circle"></i>
          <span>{{messages.success}}</span>
        </div>
        {{/if}}
        
        {{#if messages.error}}
        <div class="alert alert-danger mb-4">
          <i class="bi bi-exclamation-circle"></i>
          <span>{{messages.error}}</span>
        </div>
        {{/if}}
        
        {{{body}}}
      </main>
    </div>
  </div>
  {{else}}
  <!-- Public Layout -->
  <main class="public-main">
    {{{body}}}
  </main>
  
  <footer class="public-footer">
    <div class="container">
      <p>&copy; {{currentYear}} <a href="https://cloudstrucc.com">Cloudstrucc Inc.</a> All Rights Reserved.</p>
    </div>
  </footer>
  {{/if}}
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
